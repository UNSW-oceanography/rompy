
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SCHISM procedural example &#8212; rompy 0.1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=01f34227"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/schism_procedural';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Documentation" href="../api.html" />
    <link rel="prev" title="SWAN Physics Components" href="physics.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">rompy 0.1.0 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../core_concepts.html">
    Core Concepts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models.html">
    Models
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../demo.html">
    Demonstration notebooks
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api.html">
    API  Documentation
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rom-py/rompy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../core_concepts.html">
    Core Concepts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../models.html">
    Models
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../demo.html">
    Demonstration notebooks
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API  Documentation
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rom-py/rompy" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_concepts.html">Core Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../demo.html">Demonstration notebooks</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../demo.html#thumbnails-gallery">Thumbnails gallery</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="demo.html">Basic demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="demo.html#Command-line-interface">Command line interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="templates_demo.html">Templates demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan/example_declarative.html">SWAN declarative example</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan/example_procedural.html">SWAN procedural example</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan/example_sensitivity.html">SWAN sensitivity example</a></li>
<li class="toctree-l3"><a class="reference internal" href="oceanum_example.html">Working demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="swan-config-components.html">Model components</a></li>
<li class="toctree-l3"><a class="reference internal" href="physics.html">SWAN Physics Components</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SCHISM procedural example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Frontmatter">Frontmatter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Workspace-basepath">Workspace basepath</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Model-Grid">Model Grid</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Forcing-data">Forcing data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Sflux-Data">Sflux Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Ocean-Boundary">Ocean Boundary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Wave">Wave</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Tidal-data">Tidal data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Full-config-object">Full config object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Model-Run">Model Run</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Generate-workspace">Generate workspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Run-schism">Run schism</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Check-results">Check results</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Running-from-configuration-files.">Running from configuration files.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API  Documentation</a></li>
</ul>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../demo.html" class="nav-link">Demonstration notebooks</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">SCHISM...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="SCHISM-procedural-example">
<h1>SCHISM procedural example<a class="headerlink" href="#SCHISM-procedural-example" title="Link to this heading">#</a></h1>
<p>In this notebook we will use the SCHOSM grid, config and data objects to define a SCHISM workspace</p>
<section id="Frontmatter">
<h2>Frontmatter<a class="headerlink" href="#Frontmatter" title="Link to this heading">#</a></h2>
<p>Required inputs and defination of a few helper functions</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2

<span class="c1"># turn off warnings</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>


<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">rompy.core</span> <span class="kn">import</span> <span class="n">DataBlob</span><span class="p">,</span> <span class="n">TimeRange</span>
<span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">rmtree</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">intake</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">HERE</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;../../tests/schism&#39;</span><span class="p">)</span>



<span class="c1"># Define some useful functions for plotting outputs</span>

<span class="kn">from</span> <span class="nn">matplotlib.tri</span> <span class="kn">import</span> <span class="n">Triangulation</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="k">as</span> <span class="nn">cfeature</span>
<span class="c1">#import cartopy.mpl.ticker as cticker</span>
<span class="kn">from</span> <span class="nn">cartopy.io.shapereader</span> <span class="kn">import</span> <span class="n">Reader</span>
<span class="kn">from</span> <span class="nn">cartopy.feature</span> <span class="kn">import</span> <span class="n">ShapelyFeature</span>

<span class="kn">from</span> <span class="nn">cartopy.mpl.ticker</span> <span class="kn">import</span> <span class="n">LongitudeFormatter</span><span class="p">,</span> <span class="n">LatitudeFormatter</span>
<span class="n">lon_formatter</span> <span class="o">=</span> <span class="n">LongitudeFormatter</span><span class="p">()</span>
<span class="n">lat_formatter</span> <span class="o">=</span> <span class="n">LatitudeFormatter</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Proj</span><span class="p">,</span> <span class="n">transform</span>
<span class="kn">import</span> <span class="nn">pytz</span>

<span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">KDTree</span>
<span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="kn">import</span> <span class="n">griddata</span>

<span class="k">def</span> <span class="nf">schism_load</span><span class="p">(</span><span class="n">schfile</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Ron: Load schism output file and parse the element/node values to create a (matplotlib) trimesh object for plotting</span>

<span class="sd">    Returns xarray dataset and trimesh object</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">schout</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">schfile</span><span class="p">)</span>
    <span class="n">elems</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_face_nodes</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># Ron: get lat/lon coordinates of nodes - weird it appears x,y are switched</span>
    <span class="n">lons</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_y</span><span class="o">.</span><span class="n">values</span>
    <span class="n">lats</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_x</span><span class="o">.</span><span class="n">values</span>
    <span class="c1"># create trimesh object</span>
    <span class="n">meshtri</span> <span class="o">=</span> <span class="n">Triangulation</span><span class="p">(</span><span class="n">lats</span><span class="p">,</span> <span class="n">lons</span><span class="p">,</span> <span class="n">triangles</span><span class="o">=</span><span class="n">elems</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span>

<span class="k">def</span> <span class="nf">schism_plot</span><span class="p">(</span><span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span><span class="p">,</span><span class="n">varname</span><span class="p">,</span><span class="n">varscale</span><span class="o">=</span><span class="p">[],</span><span class="n">bbox</span><span class="o">=</span><span class="p">[],</span><span class="n">time</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plotmesh</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">project</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span>
                <span class="n">pscale</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    plot output variable in xarray dataset (schout) using mesh information meshtri.</span>
<span class="sd">    input:</span>
<span class="sd">        schout: xarray dataset returned by def schism_load</span>
<span class="sd">        meshtri: (matplotlib) trimesh object returned by def schism_load</span>
<span class="sd">        varname: name of data variable in schout</span>
<span class="sd">        OPTIONAL:</span>
<span class="sd">            varscale: min/max plotting colour values (defalts to min/max)</span>
<span class="sd">            bbox: bounding box for plotting [minlon,minlat,maxlon,maxlat] (defalts to data bounds)</span>
<span class="sd">            time: time to plot (if a variable dimension), can be int (index) or datetime64-like object</span>
<span class="sd">            plotmesh: plot the grid mesh (elemment boundaries)</span>
<span class="sd">            project: use a map projection (cartopy, so that e.g. gis data can be added - this is slower</span>
<span class="sd">            mask: mask out parts of the SCHISM output based on a minumum depth threshold</span>
<span class="sd">    Returns xarray dataset and</span>
<span class="sd">    We should modify this to load multiple files ... probably need assistance from DASK</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;time&#39;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">dims</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="o">==</span><span class="nb">int</span> <span class="p">:</span> <span class="c1"># input ts is index</span>
            <span class="n">schout</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># assume is datetime64-like object</span>
            <span class="n">schout</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>
    <span class="c1"># By default, plot depth contours</span>
    <span class="c1"># ... I like depth to be z (negative)</span>
    <span class="n">z</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">depth</span><span class="o">*-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">contours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">contours</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">contours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">contours</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">varname</span><span class="o">==</span><span class="s1">&#39;depth&#39;</span> <span class="ow">or</span> <span class="n">varname</span><span class="o">==</span><span class="s1">&#39;z&#39;</span><span class="p">:</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">z</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">var</span><span class="o">=</span><span class="n">schout</span><span class="p">[</span><span class="n">varname</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">varscale</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">var</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">var</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="n">varscale</span>
    <span class="k">if</span> <span class="n">project</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">meshtri</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">meshtri</span><span class="o">.</span><span class="n">y</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">pscale</span><span class="p">,</span><span class="n">pscale</span><span class="p">),</span>
            <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()})</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span><span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">plotmesh</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">triplot</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="c1">### MASKING ** doesnt work with tripcolor, must use tricontouf ###############################</span>
    <span class="c1"># mask all places in the grid where depth is greater than elev (i.e. are &quot;dry&quot;) by threshold below</span>
    <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
        <span class="c1"># temp=var.values</span>
        <span class="c1"># threshold of + 0.05 seems pretty good   *** But do we want to use the minimum depth</span>
        <span class="c1"># defined in the SCHISM input (H0) and in output schout.minimum_depth</span>
        <span class="c1"># bad_idx= schout.elev.values+schout.depth.values&lt;0.05</span>
        <span class="n">bad_idx</span><span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">elev</span><span class="o">.</span><span class="n">values</span><span class="o">+</span><span class="n">schout</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">values</span> <span class="o">&lt;</span> <span class="n">schout</span><span class="o">.</span><span class="n">minimum_depth</span><span class="o">.</span><span class="n">values</span>
        <span class="c1"># new way</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">bad_idx</span><span class="p">[</span><span class="n">meshtri</span><span class="o">.</span><span class="n">triangles</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">meshtri</span><span class="o">.</span><span class="n">set_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>

        <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;neither&#39;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">&lt;</span><span class="n">vmin</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&gt;</span><span class="n">vmax</span><span class="p">):</span>
            <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;both&#39;</span>
        <span class="k">elif</span> <span class="n">var</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">&lt;</span><span class="n">vmin</span><span class="p">:</span>
            <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;min&#39;</span>
        <span class="k">elif</span> <span class="n">var</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&gt;</span><span class="n">vmax</span><span class="p">:</span>
            <span class="n">extend</span><span class="o">=</span><span class="s1">&#39;max&#39;</span>

        <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="n">levels</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">extend</span><span class="o">=</span><span class="n">extend</span><span class="p">)</span>
    <span class="c1">#no mask#############################################################</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">tripcolor</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
        <span class="c1"># quiver variables if asked</span>
    <span class="k">if</span> <span class="n">vectors</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;WWM&#39;</span><span class="p">,</span><span class="n">varname</span><span class="p">):</span>
            <span class="n">vtype</span><span class="o">=</span><span class="s1">&#39;waves&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vtype</span><span class="o">=</span><span class="s1">&#39;currents&#39;</span>
        <span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span><span class="p">,</span><span class="n">UI</span><span class="p">,</span><span class="n">VI</span><span class="o">=</span><span class="n">schism_calculate_vectors</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">schout</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">vtype</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span><span class="p">,</span><span class="n">UI</span><span class="p">,</span><span class="n">VI</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>

    <span class="n">con</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">tricontour</span><span class="p">(</span><span class="n">meshtri</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">contours</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
    <span class="c1"># ax.clabel(con, con.levels, inline=True, fmt=&#39;%i&#39;, fontsize=12)</span>
    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">project</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># draw lat/lon grid lines every n degrees.</span>
        <span class="c1">#  n = (max(lat)-min(lat))/8</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span>
        <span class="k">for</span> <span class="n">fac</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">]:</span>
            <span class="n">nr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span>
            <span class="k">if</span> <span class="n">nr</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">n</span><span class="o">=</span><span class="n">nr</span>
                <span class="n">xticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="o">+</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
                <span class="n">yticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="n">fac</span><span class="p">)</span><span class="o">/</span><span class="n">fac</span><span class="o">+</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
                <span class="k">break</span>
<span class="c1">#        ax.set_xticks(xticks, crs=ccrs.PlateCarree()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
<span class="c1">#         ax.set_xticklabels(np.arange(np.round(min(x)),np.round(max(x)),n))</span>
<span class="c1">#        ax.set_yticks(yticks, crs=ccrs.PlateCarree()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks</span><span class="p">)</span>
<span class="c1">#         ax.set_yticklabels(np.arange(np.round(min(y)),np.round(max(y)),n))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
        <span class="c1">#lon_formatter = cticker.LongitudeFormatter()</span>
        <span class="c1">#lat_formatter = cticker.LatitudeFormatter()</span>
        <span class="c1"># New versions of marplotlib throw warnings on this - does it matter</span>
    <span class="c1"># ax.xaxis.set_major_formatter(lon_formatter)</span>
        <span class="c1"># ax.yaxis.set_major_formatter(lat_formatter)</span>
    <span class="c1">#ax.set_xticks(lon_formatter)</span>
    <span class="c1">#ax.set_yticks(lat_formatter)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">BORDERS</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">mappable</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span><span class="n">shrink</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">set_ticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">varname</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ax</span>

<span class="c1">#Nautical convention</span>
<span class="k">def</span> <span class="nf">pol2cart2</span><span class="p">(</span><span class="n">rho</span><span class="p">,</span> <span class="n">deg</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pol2cart</span><span class="p">(</span><span class="n">rho</span><span class="p">,</span> <span class="n">deg</span><span class="o">/</span><span class="mf">180.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>

<span class="c1"># Cartesian convention</span>
<span class="k">def</span> <span class="nf">pol2cart</span><span class="p">(</span><span class="n">rho</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

<span class="k">def</span> <span class="nf">schism_calculate_vectors</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">schout</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s1">&#39;waves&#39;</span><span class="p">,</span> <span class="n">dX</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">pUTM55</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="s1">&#39;epsg:32755&#39;</span><span class="p">)</span>
    <span class="c1"># pWGS84 = Proj(&#39;epsg:4326&#39;)</span>
    <span class="k">if</span> <span class="n">vtype</span><span class="o">==</span><span class="s1">&#39;waves&#39;</span><span class="p">:</span>
        <span class="n">idx</span><span class="o">=</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">WWM_1</span><span class="o">&gt;</span><span class="mf">0.05</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">elev</span><span class="o">-</span><span class="n">schout</span><span class="o">.</span><span class="n">depth</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="n">dp</span><span class="o">=</span><span class="n">schout</span><span class="o">.</span><span class="n">WWM_18</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="c1"># hs=schout.WWM_1[idx]</span>
        <span class="n">hs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="p">[</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">pol2cart2</span><span class="p">(</span><span class="n">hs</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mod</span><span class="p">(</span><span class="n">dp</span><span class="o">+</span><span class="mi">180</span><span class="p">,</span> <span class="mi">360</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">vtype</span><span class="o">==</span><span class="s1">&#39;elev&#39;</span><span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;curr&#39;</span><span class="p">,</span><span class="n">vtype</span><span class="p">):</span>
        <span class="n">idx</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">&gt;</span><span class="mf">0.01</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">dahv</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#dahv has u and v components, so use index of 1 for v and index of 0 for u</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*** Warning input vecter data not understood&#39;</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">pUTM55</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_x</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span><span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_y</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>
    <span class="n">xlim</span><span class="p">,</span><span class="n">ylim</span><span class="o">=</span><span class="n">pUTM55</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">(),</span><span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
    <span class="c1"># might have to play with this - we assume a total of 100 arrows a side will be pleasing</span>
    <span class="k">if</span> <span class="n">dX</span><span class="o">==</span><span class="s1">&#39;auto&#39;</span><span class="p">:</span>
        <span class="n">n</span><span class="o">=</span><span class="mi">30</span>
        <span class="n">dX</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>
    <span class="n">xi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
    <span class="n">yi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
    <span class="n">XI</span><span class="p">,</span><span class="n">YI</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">xi</span><span class="p">,</span><span class="n">yi</span><span class="p">)</span>

    <span class="n">UI</span> <span class="o">=</span> <span class="n">griddata</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">u</span><span class="p">,(</span><span class="n">XI</span><span class="p">,</span><span class="n">YI</span><span class="p">),</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
    <span class="n">VI</span> <span class="o">=</span> <span class="n">griddata</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">v</span><span class="p">,(</span><span class="n">XI</span><span class="p">,</span><span class="n">YI</span><span class="p">),</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
    <span class="c1"># Create a mask so that place with very little data are removed</span>
    <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
        <span class="n">xbins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
        <span class="n">ybins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">ylim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">dX</span><span class="p">,</span><span class="n">dX</span><span class="p">)</span>
        <span class="n">densityH</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="n">xbins</span><span class="p">,</span><span class="n">ybins</span><span class="p">])</span>
        <span class="n">densityH</span><span class="o">=</span><span class="n">densityH</span><span class="o">.</span><span class="n">T</span>
        <span class="c1"># might want to adjust this...</span>
        <span class="n">idx</span><span class="o">=</span><span class="n">densityH</span><span class="o">&lt;</span><span class="mi">1</span>
        <span class="n">UI</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
        <span class="n">VI</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
    <span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span> <span class="o">=</span> <span class="n">pUTM55</span><span class="p">(</span><span class="n">XI</span><span class="p">,</span><span class="n">YI</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">LonI</span><span class="p">,</span><span class="n">LatI</span><span class="p">,</span><span class="n">UI</span><span class="p">,</span><span class="n">VI</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
The autoreload extension is already loaded. To reload it, use:
  %reload_ext autoreload
</pre></div></div>
</div>
</section>
<section id="Workspace-basepath">
<h2>Workspace basepath<a class="headerlink" href="#Workspace-basepath" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;schism_procedural&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">workdir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">rmtree</span><span class="p">(</span><span class="n">workdir</span><span class="p">)</span>

<span class="n">workdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Model-Grid">
<h2>Model Grid<a class="headerlink" href="#Model-Grid" title="Link to this heading">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Grid object</span>

<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">Inputs</span><span class="p">,</span> <span class="n">SCHISMGrid</span>

<span class="c1">#SCHISMGrid?</span>

<span class="c1"># Medium sized grid, will run one day in about 3 minutes on 48 cores</span>
<span class="c1"># hgrid = HERE / &quot;test_data&quot; / &quot;hgrid.gr3&quot;</span>

<span class="c1"># Fast running grid, will run in about 1 minute on 4 cores</span>
<span class="n">hgrid</span> <span class="o">=</span> <span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;hgrid_20kmto60km_rompyschism_testing.gr3&quot;</span>

<span class="n">grid</span><span class="o">=</span><span class="n">SCHISMGrid</span><span class="p">(</span>
    <span class="n">hgrid</span><span class="o">=</span><span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hgrid&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">hgrid</span><span class="p">),</span>
    <span class="n">drag</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">grid</span><span class="o">.</span><span class="n">plot_hgrid</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:drag is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_6_1.png" src="../_images/notebooks_schism_procedural_6_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">workdir</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated drag with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/hgrid_WWM.gr3
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;schism_procedural/hgrid.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid.ll&#39;),
 PosixPath(&#39;schism_procedural/diffmin.gr3&#39;),
 PosixPath(&#39;schism_procedural/watertype.gr3&#39;),
 PosixPath(&#39;schism_procedural/vgrid.in&#39;),
 PosixPath(&#39;schism_procedural/albedo.gr3&#39;),
 PosixPath(&#39;schism_procedural/windrot_geo2proj.gr3&#39;),
 PosixPath(&#39;schism_procedural/wwmbnd.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmax.gr3&#39;),
 PosixPath(&#39;schism_procedural/drag.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid_WWM.gr3&#39;),
 PosixPath(&#39;schism_procedural/tvd.prop&#39;)]
</pre></div></div>
</div>
</section>
</section>
<section id="Forcing-data">
<h1>Forcing data<a class="headerlink" href="#Forcing-data" title="Link to this heading">#</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First lists import the main data classes</span>
<span class="kn">from</span> <span class="nn">rompy.schism.data</span> <span class="kn">import</span> <span class="n">SCHISMDataSflux</span><span class="p">,</span> <span class="n">SCHISMDataOcean</span><span class="p">,</span> <span class="n">SCHISMDataWave</span><span class="p">,</span> <span class="n">SCHISMDataTides</span>

<span class="c1"># Sets also import a few of the minor classes that are used in the construction of these main classes for use in this demo</span>
<span class="kn">from</span> <span class="nn">rompy.schism.data</span> <span class="kn">import</span> <span class="n">SfluxSource</span><span class="p">,</span> <span class="n">TidalDataset</span><span class="p">,</span> <span class="n">SfluxAir</span><span class="p">,</span> <span class="n">SCHISMDataBoundary</span>

<span class="c1"># And also lets import some of the core data source objects. These are data input abstractions that work in exactly the same way as</span>
<span class="c1"># with the swan classes, and can be used interchangeably in each of the data classes depending on the data source. We will use a</span>
<span class="c1"># bit of a mix here for illustration purposes.</span>
<span class="kn">from</span> <span class="nn">rompy.core.data</span> <span class="kn">import</span> <span class="n">DataBlob</span><span class="p">,</span> <span class="n">SourceFile</span><span class="p">,</span> <span class="n">SourceDataset</span><span class="p">,</span> <span class="n">SourceIntake</span><span class="p">,</span> <span class="n">SourceDatamesh</span>
<span class="kn">from</span> <span class="nn">rompy.core.boundary</span> <span class="kn">import</span> <span class="n">SourceWavespectra</span>
</pre></div>
</div>
</div>
<section id="Sflux-Data">
<h2>Sflux Data<a class="headerlink" href="#Sflux-Data" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rompy.schism.namelists</span> <span class="kn">import</span> <span class="n">Sflux_Inputs</span>
<span class="c1"># SCHISMDataSflux??</span>
<span class="c1"># SfluxSource??</span>
<span class="c1"># Sflux_Inputs??</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">intake</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_catalog</span><span class="p">(</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;..&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;catalog.yaml&quot;</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">era5</span><span class="o">.</span><span class="n">to_dask</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ds</span><span class="o">.</span><span class="n">u10</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;RdBu_r&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;cartopy.mpl.geocollection.GeoQuadMesh at 0x7f95f3f44690&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_12_1.png" src="../_images/notebooks_schism_procedural_12_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lets have a look at an flux object. Here we will use a ERA5 dataset exposed through the intake catalog in the tests/data folder.</span>
<span class="kn">from</span> <span class="nn">rompy.core.time</span> <span class="kn">import</span> <span class="n">TimeRange</span>

<span class="n">atmos_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataSflux</span><span class="p">(</span>
    <span class="n">air_1</span><span class="o">=</span><span class="n">SfluxAir</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;air_1&quot;</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">SourceIntake</span><span class="p">(</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="s2">&quot;era5&quot;</span><span class="p">,</span>
            <span class="n">catalog_uri</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;..&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;catalog.yaml&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="nb">filter</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;coords&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;latitude&quot;</span><span class="p">]},</span>
        <span class="p">},</span>
    <span class="n">buffer</span><span class="o">=</span><span class="mi">2</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">atmos_forcing</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">destdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-02&quot;</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mi">3600</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.data:Fetching air_1
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;**/*&#39;</span><span class="p">))</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;schism_procedural/hgrid.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid.ll&#39;),
 PosixPath(&#39;schism_procedural/diffmin.gr3&#39;),
 PosixPath(&#39;schism_procedural/watertype.gr3&#39;),
 PosixPath(&#39;schism_procedural/vgrid.in&#39;),
 PosixPath(&#39;schism_procedural/albedo.gr3&#39;),
 PosixPath(&#39;schism_procedural/sflux&#39;),
 PosixPath(&#39;schism_procedural/windrot_geo2proj.gr3&#39;),
 PosixPath(&#39;schism_procedural/wwmbnd.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmax.gr3&#39;),
 PosixPath(&#39;schism_procedural/drag.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid_WWM.gr3&#39;),
 PosixPath(&#39;schism_procedural/tvd.prop&#39;),
 PosixPath(&#39;schism_procedural/sflux/air_1.0001.nc&#39;),
 PosixPath(&#39;schism_procedural/sflux/sflux_inputs.txt&#39;)]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a map</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="c1"># load the data</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">&quot;schism_procedural/sflux/air_1.0001.nc&quot;</span><span class="p">)</span>
<span class="n">wind_speed</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">u10</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">ds</span><span class="o">.</span><span class="n">v10</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># plot the data</span>
<span class="n">wind_speed</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;cartopy.mpl.geocollection.GeoQuadMesh at 0x7f95ec7c2010&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_15_1.png" src="../_images/notebooks_schism_procedural_15_1.png" />
</div>
</div>
</section>
<section id="Ocean-Boundary">
<h2>Ocean Boundary<a class="headerlink" href="#Ocean-Boundary" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#SCHISMDataOcean??</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;hycom.nc&quot;</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ds</span><span class="p">[</span><span class="s2">&quot;surf_el&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7f95ec7f6550&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_18_1.png" src="../_images/notebooks_schism_procedural_18_1.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">ocean_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataOcean</span><span class="p">(</span>
                <span class="n">elev2D</span> <span class="o">=</span> <span class="n">SCHISMDataBoundary</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hycom&quot;</span><span class="p">,</span>
                    <span class="n">source</span><span class="o">=</span><span class="n">SourceFile</span><span class="p">(</span>
                        <span class="n">uri</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;hycom.nc&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;surf_el&quot;</span><span class="p">,</span>
                    <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;ylat&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="s2">&quot;xlon&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="s2">&quot;depth&quot;</span><span class="p">},</span>
                    <span class="n">interpolate_missing_coastal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ocean_forcing</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">destdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">workdir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.data:Fetching elev2D
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;schism_procedural/hgrid.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid.ll&#39;),
 PosixPath(&#39;schism_procedural/diffmin.gr3&#39;),
 PosixPath(&#39;schism_procedural/watertype.gr3&#39;),
 PosixPath(&#39;schism_procedural/vgrid.in&#39;),
 PosixPath(&#39;schism_procedural/albedo.gr3&#39;),
 PosixPath(&#39;schism_procedural/sflux&#39;),
 PosixPath(&#39;schism_procedural/windrot_geo2proj.gr3&#39;),
 PosixPath(&#39;schism_procedural/wwmbnd.gr3&#39;),
 PosixPath(&#39;schism_procedural/diffmax.gr3&#39;),
 PosixPath(&#39;schism_procedural/elev2D.th.nc&#39;),
 PosixPath(&#39;schism_procedural/drag.gr3&#39;),
 PosixPath(&#39;schism_procedural/hgrid_WWM.gr3&#39;),
 PosixPath(&#39;schism_procedural/tvd.prop&#39;)]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dsb</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;schism_procedural/elev2D.th.nc&#39;</span><span class="p">)</span>
<span class="n">dsb</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;time&#x27; ()&gt;
array(&#x27;2023-01-01T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)
Coordinates:
    time     datetime64[ns] 2023-01-01
Attributes:
    long_name:      Time
    standard_name:  time
    base_date:      [2023    1    1    0    0    0]</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'time'</div></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-6811d340-783a-4481-be78-b33d4daaea53' class='xr-array-in' type='checkbox' checked><label for='section-6811d340-783a-4481-be78-b33d4daaea53' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>2023-01-01</span></div><div class='xr-array-data'><pre>array(&#x27;2023-01-01T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></div></li><li class='xr-section-item'><input id='section-1199b034-6e95-4684-9a15-229144577d94' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1199b034-6e95-4684-9a15-229144577d94' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>time</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2023-01-01</div><input id='attrs-75462b02-d1d0-4768-8c3f-a55f76bf3c8c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-75462b02-d1d0-4768-8c3f-a55f76bf3c8c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-726ee7d2-29ba-43e3-bbee-d6b5a9d6ef9a' class='xr-var-data-in' type='checkbox'><label for='data-726ee7d2-29ba-43e3-bbee-d6b5a9d6ef9a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>base_date :</span></dt><dd>[2023    1    1    0    0    0]</dd></dl></div><div class='xr-var-data'><pre>array(&#x27;2023-01-01T00:00:00.000000000&#x27;, dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-aa7b0ad8-72ad-42c3-bbd2-908a9eb53cc4' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-aa7b0ad8-72ad-42c3-bbd2-908a9eb53cc4' class='xr-section-summary'  title='Expand/collapse section'>Indexes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'></ul></div></li><li class='xr-section-item'><input id='section-7456c846-6d8a-4b77-bdca-c157ea4e1182' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7456c846-6d8a-4b77-bdca-c157ea4e1182' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>base_date :</span></dt><dd>[2023    1    1    0    0    0]</dd></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.9</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">dsb</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ds</span><span class="p">[</span><span class="s2">&quot;surf_el&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">dsb</span><span class="o">.</span><span class="n">time_series</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">boundary_points</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">c</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

<span class="c1"># Check for nans (there shouldn&#39;t be any)</span>
<span class="c1"># nans = dsb.time_series.isel(time=0).isnull().squeeze()</span>
<span class="c1"># ax.scatter(x[nans], y[nans], transform=ccrs.PlateCarree(), c=&quot;red&quot;, edgecolor=&quot;black&quot;)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.PathCollection at 0x7f95f3f47510&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_22_1.png" src="../_images/notebooks_schism_procedural_22_1.png" />
</div>
</div>
</section>
<section id="Wave">
<h2>Wave<a class="headerlink" href="#Wave" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># SCHISMDataWave??</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wave_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataWave</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;wavedata&quot;</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">SourceIntake</span><span class="p">(</span>
            <span class="n">dataset_id</span><span class="o">=</span><span class="s2">&quot;ausspec&quot;</span><span class="p">,</span>
            <span class="n">catalog_uri</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;..&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span> <span class="o">/</span> <span class="s2">&quot;catalog.yaml&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s2">&quot;lat&quot;</span><span class="p">},</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">wave_forcing</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">model_grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
<span class="n">wave_forcing</span><span class="o">.</span><span class="n">plot_boundary</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;GeoAxes: &gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_26_1.png" src="../_images/notebooks_schism_procedural_26_1.png" />
</div>
</div>
</section>
<section id="Tidal-data">
<h2>Tidal data<a class="headerlink" href="#Tidal-data" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># SCHISMDataTides?</span>
<span class="c1"># TidalDataset?</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tidal_forcing</span> <span class="o">=</span> <span class="n">SCHISMDataTides</span><span class="p">(</span>
    <span class="n">tidal_data</span><span class="o">=</span><span class="n">TidalDataset</span><span class="p">(</span>
        <span class="n">elevations</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span><span class="o">/</span> <span class="s2">&quot;tpxo9-test&quot;</span> <span class="o">/</span> <span class="s2">&quot;h_m2s2n2.nc&quot;</span><span class="p">,</span>
        <span class="n">velocities</span><span class="o">=</span><span class="n">HERE</span> <span class="o">/</span> <span class="s2">&quot;test_data&quot;</span><span class="o">/</span> <span class="s2">&quot;tpxo9-test&quot;</span> <span class="o">/</span> <span class="s2">&quot;u_m2s2n2.nc&quot;</span>
    <span class="p">),</span>
    <span class="n">constituents</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;M2&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;N2&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">tidal_forcing</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">destdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">time</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2023-01-02&quot;</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mi">3600</span><span class="p">),</span>
<span class="p">)</span>
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.schism.data:Generating tides
INFO:pyschism.forcing.bctides.bctides:Processing boundary 1:
INFO:pyschism.forcing.bctides.bctides:Elevation type: 5
WARNING:pyschism.forcing.bctides.bctides:Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent N2.
INFO:pyschism.forcing.bctides.bctides:Velocity type: 3
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent N2.
INFO:pyschism.forcing.bctides.bctides:Temperature type: 0
WARNING:pyschism.forcing.bctides.bctides:Temperature is not sepcified, not input needed!
INFO:pyschism.forcing.bctides.bctides:Salinity type: 0
INFO:pyschism.forcing.bctides.bctides:Salinity is not sepcified, not input needed!
</pre></div></div>
</div>
</section>
</section>
<section id="Full-config-object">
<h1>Full config object<a class="headerlink" href="#Full-config-object" title="Link to this heading">#</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># Instantiate a config object</span>

<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">SchismCSIROConfig</span>
<span class="kn">from</span> <span class="nn">rompy.schism.data</span> <span class="kn">import</span> <span class="n">SCHISMData</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
        <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
            <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
            <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
            <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
            <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
            <span class="p">),</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 validation error for SchismCSIROConfig
  Value error, manning.gr3 must be specified when nchi=-1 [type=value_error, input_value={&#39;grid&#39;: SCHISMGrid([152....], sobc=[1], relax=[]))}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/value_error
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># That gives us an expected error due to teh fact that we have a validator checking required inputs</span>
<span class="c1"># Lets fix the grid issue and try again</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
        <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
            <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
            <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
            <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
            <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
            <span class="p">),</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>


<span class="c1"># Again we get a validation error, the hgrid_WWM is missing. Lets add it and try again</span>

<span class="n">grid</span><span class="o">=</span><span class="n">SCHISMGrid</span><span class="p">(</span>
    <span class="n">hgrid</span><span class="o">=</span><span class="n">DataBlob</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;hgrid&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">hgrid</span><span class="p">),</span>
    <span class="n">manning</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">config</span><span class="o">=</span><span class="n">SchismCSIROConfig</span><span class="p">(</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">mesbf</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">fricc</span><span class="o">=</span><span class="mf">0.067</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">SCHISMData</span><span class="p">(</span>
        <span class="n">atmos</span><span class="o">=</span><span class="n">atmos_forcing</span><span class="p">,</span>
        <span class="n">ocean</span><span class="o">=</span><span class="n">ocean_forcing</span><span class="p">,</span>
        <span class="n">wave</span><span class="o">=</span><span class="n">wave_forcing</span><span class="p">,</span>
        <span class="n">tides</span><span class="o">=</span><span class="n">tidal_forcing</span>
        <span class="p">),</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 validation error for SchismCSIROConfig
  Value error, manning.gr3 must be specified when nchi=-1 [type=value_error, input_value={&#39;grid&#39;: SCHISMGrid([152....], sobc=[1], relax=[]))}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.5/v/value_error
</pre></div></div>
</div>
</section>
<section id="Model-Run">
<h1>Model Run<a class="headerlink" href="#Model-Run" title="Link to this heading">#</a></h1>
<p>Note that most fields are optional, this eample using defaults values.</p>
<section id="Generate-workspace">
<h2>Generate workspace<a class="headerlink" href="#Generate-workspace" title="Link to this heading">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">workdir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="n">rmtree</span><span class="p">(</span><span class="n">workdir</span><span class="p">)</span>

<span class="n">workdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">rompy.model</span> <span class="kn">import</span> <span class="n">ModelRun</span>
<span class="kn">from</span> <span class="nn">rompy.schism</span> <span class="kn">import</span> <span class="n">SchismCSIROConfig</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">ModelRun</span><span class="p">(</span>
    <span class="n">run_id</span><span class="o">=</span><span class="s2">&quot;test_schism&quot;</span><span class="p">,</span>
    <span class="n">period</span><span class="o">=</span><span class="n">TimeRange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">),</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">workdir</span><span class="p">),</span>
    <span class="n">config</span><span class="o">=</span><span class="n">config</span>
<span class="p">)</span>

<span class="n">rundir</span> <span class="o">=</span> <span class="n">run</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:rompy.model:
INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Model settings:
INFO:rompy.model:
run_id: test_schism
period:
        Start: 2023-01-01 00:00:00
        End: 2023-01-01 12:00:00
        Duration: 12:00:00
        Interval: 1:00:00
        Include End: True

output_dir: schism_procedural
config: &lt;class &#39;rompy.schism.config.SchismCSIROConfig&#39;&gt;

INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Generating model input files in schism_procedural
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated manning with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/test_schism/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_procedural/test_schism/hgrid_WWM.gr3
INFO:rompy.schism.data:Fetching air_1
INFO:rompy.schism.data:Fetching elev2D
INFO:rompy.schism.data:Fetching wavedata
INFO:rompy.schism.data:Generating tides
INFO:pyschism.forcing.bctides.bctides:Processing boundary 1:
INFO:pyschism.forcing.bctides.bctides:Elevation type: 5
WARNING:pyschism.forcing.bctides.bctides:Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent N2.
INFO:pyschism.forcing.bctides.bctides:Velocity type: 3
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent N2.
INFO:pyschism.forcing.bctides.bctides:Temperature type: 0
WARNING:pyschism.forcing.bctides.bctides:Temperature is not sepcified, not input needed!
INFO:pyschism.forcing.bctides.bctides:Salinity type: 0
INFO:pyschism.forcing.bctides.bctides:Salinity is not sepcified, not input needed!
INFO:rompy.model:
INFO:rompy.model:Successfully generated project in schism_procedural
INFO:rompy.model:-----------------------------------------------------
</pre></div></div>
</div>
</section>
<section id="Run-schism">
<h2>Run schism<a class="headerlink" href="#Run-schism" title="Link to this heading">#</a></h2>
<p>(Note that paths to schism binaries will have to be updated)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the model</span>
<span class="o">!</span><span class="nb">cd</span><span class="w"> </span>schism_procedural/test_schism<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">4</span><span class="w"> </span>/source/schism/src/_VL_WWM<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Combine outputs</span>
<span class="o">!</span><span class="nb">cd</span><span class="w"> </span>schism_procedural/test_schism/outputs<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>/source/schism/src/Utility/Combining_Scripts/combine_output11.exe<span class="w">  </span>-b<span class="w"> </span><span class="m">1</span><span class="w"> </span>-e<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Begin:    1, End:    1, dry flag:    0
 combine all variables
</pre></div></div>
</div>
</section>
<section id="Check-results">
<h2>Check results<a class="headerlink" href="#Check-results" title="Link to this heading">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rundir</span><span class="si">}</span><span class="s2">/outputs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/JCG.out&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxdahv_0001&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxdahv_0003&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/local_to_global_0000&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/local_to_global_0003&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/schout_0000_1.nc&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxelev_0000&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/subcycling.out&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxelev_0003&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/local_to_global_0002&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/flux.out&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/schout_0001_1.nc&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxelev_0001&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/nonfatal_0001&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/param.out.nml&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/nonfatal_0000&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxdahv_0002&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/total.out&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/fatal.error&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/nonfatal_0003&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxdahv_0000&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/local_to_global_0001&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/nonfatal_0002&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/coriolis.out&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/mirror.out&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/total_TR.out&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/schout_1.nc&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/global_to_local.prop&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/schout_0002_1.nc&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/readme.md&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/schout_0003_1.nc&#39;),
 PosixPath(&#39;/source/rompy/notebooks/schism/schism_procedural/test_schism/outputs/maxelev_0002&#39;)]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#load schism files</span>
<span class="n">schfile</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;schism_procedural/test_schism/outputs/schout_1.nc&#39;</span><span class="p">)</span>
<span class="n">schout</span><span class="p">,</span><span class="n">meshtri</span><span class="o">=</span><span class="n">schism_load</span><span class="p">(</span><span class="n">schfile</span><span class="p">)</span>
<span class="n">lons</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_y</span><span class="o">.</span><span class="n">values</span>
<span class="n">lats</span> <span class="o">=</span> <span class="n">schout</span><span class="o">.</span><span class="n">SCHISM_hgrid_node_x</span><span class="o">.</span><span class="n">values</span>
<span class="n">schout</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:                  (time: 12, one: 1, nSCHISM_hgrid_face: 317,
                              nMaxSCHISM_hgrid_face_nodes: 4,
                              nSCHISM_hgrid_edge: 508, two: 2,
                              nSCHISM_hgrid_node: 192, sigma: 2,
                              nSCHISM_vgrid_layers: 2)
Coordinates:
  * time                     (time) datetime64[ns] 2023-01-01T01:00:00 ... 20...
  * sigma                    (sigma) float32 -1.0 0.0
Dimensions without coordinates: one, nSCHISM_hgrid_face,
                                nMaxSCHISM_hgrid_face_nodes,
                                nSCHISM_hgrid_edge, two, nSCHISM_hgrid_node,
                                nSCHISM_vgrid_layers
Data variables: (12/34)
    SCHISM_hgrid             (one) int32 ...
    SCHISM_hgrid_face_nodes  (nSCHISM_hgrid_face, nMaxSCHISM_hgrid_face_nodes) float64 ...
    SCHISM_hgrid_edge_nodes  (nSCHISM_hgrid_edge, two) int32 ...
    SCHISM_hgrid_node_x      (nSCHISM_hgrid_node) float64 152.2 152.0 ... 145.6
    SCHISM_hgrid_node_y      (nSCHISM_hgrid_node) float64 -24.49 ... -16.67
    node_bottom_index        (nSCHISM_hgrid_node) int32 ...
    ...                       ...
    WWM_2                    (time, nSCHISM_hgrid_node) float32 ...
    WWM_10                   (time, nSCHISM_hgrid_node) float32 ...
    WWM_11                   (time, nSCHISM_hgrid_node) float32 ...
    WWM_18                   (time, nSCHISM_hgrid_node) float32 ...
    WWM_19                   (time, nSCHISM_hgrid_node) float32 ...
    WWM_20                   (time, nSCHISM_hgrid_node) float32 ...
Attributes:
    Conventions:   CF-1.0, UGRID-1.0
    title:         SCHISM Model output
    institution:   SCHISM Model output
    source:        SCHISM model output version v10
    references:    http://ccrm.vims.edu/schismweb/
    history:       created by combine_output11
    comment:       SCHISM Model output
    type:          SCHISM Model output
    VisIT_plugin:  https://schism.water.ca.gov/library/-/document_library/vie...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-d51d8348-a16f-456e-8a21-1495b4dc1a27' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d51d8348-a16f-456e-8a21-1495b4dc1a27' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 12</li><li><span>one</span>: 1</li><li><span>nSCHISM_hgrid_face</span>: 317</li><li><span>nMaxSCHISM_hgrid_face_nodes</span>: 4</li><li><span>nSCHISM_hgrid_edge</span>: 508</li><li><span>two</span>: 2</li><li><span>nSCHISM_hgrid_node</span>: 192</li><li><span class='xr-has-index'>sigma</span>: 2</li><li><span>nSCHISM_vgrid_layers</span>: 2</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-9806a3cb-cd7d-4b91-becb-d9461ad36f23' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9806a3cb-cd7d-4b91-becb-d9461ad36f23' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2023-01-01T01:00:00 ... 2023-01-...</div><input id='attrs-f62e00f7-4626-48c0-9b15-c18491432cb3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f62e00f7-4626-48c0-9b15-c18491432cb3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d4034beb-15b8-40ec-ab1f-49c657818c0a' class='xr-var-data-in' type='checkbox'><label for='data-d4034beb-15b8-40ec-ab1f-49c657818c0a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>base_date :</span></dt><dd> 2023  1  1       0.00       0.00</dd><dt><span>standard_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2023-01-01T01:00:00.000000000&#x27;, &#x27;2023-01-01T02:00:00.000000000&#x27;,
       &#x27;2023-01-01T03:00:00.000000000&#x27;, &#x27;2023-01-01T04:00:00.000000000&#x27;,
       &#x27;2023-01-01T05:00:00.000000000&#x27;, &#x27;2023-01-01T06:00:00.000000000&#x27;,
       &#x27;2023-01-01T07:00:00.000000000&#x27;, &#x27;2023-01-01T08:00:00.000000000&#x27;,
       &#x27;2023-01-01T09:00:00.000000000&#x27;, &#x27;2023-01-01T10:00:00.000000000&#x27;,
       &#x27;2023-01-01T11:00:00.000000000&#x27;, &#x27;2023-01-01T12:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>sigma</span></div><div class='xr-var-dims'>(sigma)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-1.0 0.0</div><input id='attrs-a0e441ab-d2b6-4ca9-add5-768a7a954ac1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a0e441ab-d2b6-4ca9-add5-768a7a954ac1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3a182c95-366a-44ea-8054-e22abe7cf2de' class='xr-var-data-in' type='checkbox'><label for='data-3a182c95-366a-44ea-8054-e22abe7cf2de' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>S coordinates at whole levels</dd><dt><span>units :</span></dt><dd>1</dd><dt><span>standard_name :</span></dt><dd>ocean_s_coordinate</dd><dt><span>positive :</span></dt><dd>up</dd><dt><span>h_s :</span></dt><dd>1000000.0</dd><dt><span>h_c :</span></dt><dd>40.0</dd><dt><span>theta_b :</span></dt><dd>1.0</dd><dt><span>theta_f :</span></dt><dd>1e-04</dd><dt><span>formula_terms :</span></dt><dd>s: sigma eta: elev depth: depth a: sigma_theta_f b: sigma_theta_b depth_c: sigma_h_c</dd></dl></div><div class='xr-var-data'><pre>array([-1.,  0.], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-aa070596-49ec-4fe4-b1b8-7e4cc8c724e5' class='xr-section-summary-in' type='checkbox'  ><label for='section-aa070596-49ec-4fe4-b1b8-7e4cc8c724e5' class='xr-section-summary' >Data variables: <span>(34)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-487f0778-da46-4e3c-9a31-56473aa5ef16' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-487f0778-da46-4e3c-9a31-56473aa5ef16' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-80d53a7b-1b8a-48fe-8bfe-07f6131aaba3' class='xr-var-data-in' type='checkbox'><label for='data-80d53a7b-1b8a-48fe-8bfe-07f6131aaba3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Topology data of 2d unstructured mesh</dd><dt><span>topology_dimension :</span></dt><dd>2</dd><dt><span>cf_role :</span></dt><dd>mesh_topology</dd><dt><span>node_coordinates :</span></dt><dd>SCHISM_hgrid_node_x SCHISM_hgrid_node_y</dd><dt><span>face_node_connectivity :</span></dt><dd>SCHISM_hgrid_face_nodes</dd><dt><span>edge_coordinates :</span></dt><dd>SCHISM_hgrid_edge_x SCHISM_hgrid_edge_y</dd><dt><span>face_coordinates :</span></dt><dd>SCHISM_hgrid_face_x SCHISM_hgrid_face_y</dd><dt><span>edge_node_connectivity :</span></dt><dd>SCHISM_hgrid_edge_nodes</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_face_nodes</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_face, nMaxSCHISM_hgrid_face_nodes)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c31664bd-b9ae-4fba-a5cf-856d4d145c08' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c31664bd-b9ae-4fba-a5cf-856d4d145c08' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-36602757-e790-48e6-a045-77e68c3df429' class='xr-var-data-in' type='checkbox'><label for='data-36602757-e790-48e6-a045-77e68c3df429' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Horizontal Element Table</dd><dt><span>cf_role :</span></dt><dd>face_node_connectivity</dd><dt><span>start_index :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[1268 values with dtype=float64]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_edge_nodes</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_edge, two)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-721847cd-2ed2-486c-8ce6-51e88d05b3b1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-721847cd-2ed2-486c-8ce6-51e88d05b3b1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-387a0b1b-9f6f-4083-bcee-9a2207632e7e' class='xr-var-data-in' type='checkbox'><label for='data-387a0b1b-9f6f-4083-bcee-9a2207632e7e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Map every edge to the two nodes that it connects</dd><dt><span>cf_role :</span></dt><dd>edge_node_connectivity</dd><dt><span>start_index :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[1016 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_node_x</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>152.2 152.0 151.7 ... 145.7 145.6</div><input id='attrs-08f1b433-98a8-4b91-861f-35e436526fe3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-08f1b433-98a8-4b91-861f-35e436526fe3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-96e7591e-c5b7-44fd-af25-bac38e1994de' class='xr-var-data-in' type='checkbox'><label for='data-96e7591e-c5b7-44fd-af25-bac38e1994de' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>node x-coordinate</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd></dl></div><div class='xr-var-data'><pre>array([152.191888, 151.961402, 151.687743, 151.390401, 152.222533, 152.522581,
       152.032632, 151.107005, 151.762469, 151.47532 , 150.815363, 152.404159,
       152.848529, 150.751137, 152.157486, 151.222363, 151.831233, 151.538449,
       151.015157, 152.641191, 153.230355, 150.78958 , 152.273231, 151.382884,
       151.780446, 151.129616, 152.045606, 152.933387, 153.680172, 153.945981,
       154.1109  , 149.540922, 149.889185, 150.27257 , 150.781333, 150.51382 ,
       152.523265, 151.611272, 151.197468, 152.039815, 153.25211 , 152.802845,
       153.666987, 153.813805, 154.166261, 149.778901, 149.465369, 150.104569,
       150.39095 , 150.76319 , 152.710851, 151.196327, 152.315859, 151.703072,
       153.212137, 153.587302, 154.13924 , 149.954358, 149.719006, 149.43734 ,
       150.202899, 150.488653, 150.773781, 151.182068, 152.794625, 152.428791,
       151.558383, 152.002377, 153.068575, 153.702751, 149.250374, 149.966416,
       149.71165 , 149.537348, 149.344193, 150.312446, 150.579099, 151.454564,
       150.894684, 151.214667, 152.55277 , 152.196262, 151.811893, 152.642887,
       152.98755 , 149.330218, 149.020634, 149.898139, 149.582391, 150.278138,
       150.636444, 151.505809, 150.982047, 151.268828, 152.185482, 151.78037 ,
       152.420059, 149.485864, 149.218008, 149.016137, 148.729387, 149.898583,
       150.344115, 150.740581, 151.504536, 151.13708 , 151.894131, 149.6488  ,
       149.237186, 148.87547 , 150.052633, 150.45831 , 150.885491, 151.440996,
       149.800007, 149.418528, 148.997497, 148.662655, 150.165984, 150.561058,
       150.97492 , 149.916123, 149.59797 , 149.229706, 148.909608, 148.649325,
       150.207775, 150.673867, 149.80888 , 149.414579, 149.040057, 148.281884,
       147.942303, 148.631454, 150.120739, 149.596093, 149.214765, 148.840228,
       146.888899, 147.127515, 147.248576, 147.600495, 147.827733, 148.184579,
       148.514496, 149.421501, 148.976135, 148.664465, 146.606825, 146.902965,
       147.156883, 147.44025 , 147.842428, 148.251753, 148.739712, 146.680075,
       146.334876, 146.957595, 147.356091, 147.74976 , 147.98143 , 148.337153,
       146.598114, 146.313388, 146.803581, 147.205453, 147.626608, 147.941876,
       146.499172, 146.18645 , 146.597345, 146.963808, 147.525034, 146.29652 ,
       146.388677, 146.007683, 146.632313, 147.019123, 146.317413, 146.099792,
       146.507513, 146.660776, 146.21203 , 146.06415 , 146.455847, 146.203421,
       145.967656, 146.173351, 145.885009, 145.765185, 145.710811, 145.572276])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_node_y</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-24.49 -24.31 ... -16.34 -16.67</div><input id='attrs-d15cb4ce-d7de-42f8-86b2-8e51f68b8374' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d15cb4ce-d7de-42f8-86b2-8e51f68b8374' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bea59e47-fb84-470d-975c-f3f6f2063514' class='xr-var-data-in' type='checkbox'><label for='data-bea59e47-fb84-470d-975c-f3f6f2063514' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>node y-coordinate</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd></dl></div><div class='xr-var-data'><pre>array([-24.48845 , -24.310171, -24.127191, -23.986436, -24.208215, -24.267316,
       -24.013031, -23.70232 , -23.803954, -23.595658, -23.416518, -23.961354,
       -24.01261 , -23.113546, -23.666114, -23.352705, -23.433829, -23.293237,
       -23.083202, -23.599374, -23.657106, -22.869503, -23.183164, -23.023902,
       -23.059181, -22.72168 , -22.787399, -23.113162, -23.087785, -22.605529,
       -22.160146, -22.205103, -22.493792, -22.401796, -22.420969, -22.333906,
       -22.619489, -22.631816, -22.298786, -22.441868, -22.52787 , -22.196872,
       -22.19699 , -21.819053, -21.80372 , -22.096744, -21.923966, -22.216068,
       -22.127051, -22.071928, -21.882622, -21.857246, -22.082098, -22.086944,
       -21.870474, -21.458882, -21.422191, -21.9359  , -21.80448 , -21.640632,
       -21.889458, -21.848213, -21.615385, -21.458472, -21.602315, -21.660416,
       -21.609952, -21.683613, -21.274824, -20.905675, -21.411923, -21.672072,
       -21.556787, -21.357606, -21.159292, -21.536258, -21.299109, -21.299699,
       -21.234403, -21.132817, -21.322067, -21.388327, -21.271914, -21.00264 ,
       -20.758396, -20.957257, -21.001432, -21.308514, -21.067643, -21.119237,
       -20.989277, -21.02457 , -20.910087, -20.86874 , -21.002503, -20.892774,
       -20.654216, -20.774071, -20.783453, -20.683688, -20.712935, -20.848115,
       -20.732524, -20.63907 , -20.680443, -20.595098, -20.483154, -20.486766,
       -20.50026 , -20.419649, -20.445902, -20.352009, -20.25399 , -20.216808,
       -20.16619 , -20.184727, -20.168142, -20.245677, -20.088307, -19.950722,
       -19.768292, -19.896254, -19.89411 , -19.891732, -19.878007, -20.055811,
       -19.7175  , -19.522515, -19.614464, -19.610292, -19.614109, -19.892762,
       -19.917921, -19.659502, -19.231146, -19.336266, -19.310061, -19.334067,
       -19.30534 , -19.18044 , -19.432733, -19.448485, -19.682213, -19.529737,
       -19.310443, -18.91432 , -19.050063, -19.059178, -19.155363, -19.047585,
       -18.977885, -19.138232, -19.274335, -18.968662, -18.631662, -18.918566,
       -18.954156, -18.747291, -18.775382, -18.877063, -18.610237, -18.453489,
       -18.687968, -18.678864, -18.405948, -18.41651 , -18.494148, -18.256757,
       -18.422163, -18.472298, -18.113243, -18.047322, -18.027426, -18.153983,
       -17.892156, -18.190754, -17.756848, -17.562285, -17.603789, -17.832289,
       -17.320951, -16.797666, -17.31032 , -17.509247, -16.538514, -16.892663,
       -17.224117, -16.398045, -16.642014, -16.907269, -16.343982, -16.667374])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>node_bottom_index</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-21bfdbae-9d01-4f45-b7de-7a9dbc25fc98' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-21bfdbae-9d01-4f45-b7de-7a9dbc25fc98' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2f1403dd-a71f-43bd-9bb1-fadc79ec33e7' class='xr-var-data-in' type='checkbox'><label for='data-2f1403dd-a71f-43bd-9bb1-fadc79ec33e7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>bottom level index at each node</dd><dt><span>units :</span></dt><dd>non-dimensional</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>location :</span></dt><dd>node</dd><dt><span>start_index :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[192 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_face_x</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_face)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-da86fd7e-a751-4d9d-85c1-896dedee843a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-da86fd7e-a751-4d9d-85c1-896dedee843a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b2b09161-eea1-4849-9748-d8577d685045' class='xr-var-data-in' type='checkbox'><label for='data-b2b09161-eea1-4849-9748-d8577d685045' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>x_coordinate of 2D mesh face</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd></dl></div><div class='xr-var-data'><pre>[317 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_face_y</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_face)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-44d8f541-b6ef-4be3-b0a3-dc59499cf935' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-44d8f541-b6ef-4be3-b0a3-dc59499cf935' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-426dfd56-6326-48d6-8a02-10d560ef1a83' class='xr-var-data-in' type='checkbox'><label for='data-426dfd56-6326-48d6-8a02-10d560ef1a83' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>y_coordinate of 2D mesh face</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd></dl></div><div class='xr-var-data'><pre>[317 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ele_bottom_index</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_face)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-09a0f412-67bf-4010-9b86-760fb531f0ee' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-09a0f412-67bf-4010-9b86-760fb531f0ee' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1e270078-a632-4bde-a524-76e1c1db6b42' class='xr-var-data-in' type='checkbox'><label for='data-1e270078-a632-4bde-a524-76e1c1db6b42' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>bottom level index at each element</dd><dt><span>units :</span></dt><dd>non-dimensional</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>location :</span></dt><dd>elem</dd><dt><span>start_index :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[317 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_edge_x</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_edge)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-0922b2e0-41b4-42a8-b32b-be4612563625' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0922b2e0-41b4-42a8-b32b-be4612563625' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-517ceb04-e1c3-45b6-bf02-fa5eac8d1da5' class='xr-var-data-in' type='checkbox'><label for='data-517ceb04-e1c3-45b6-bf02-fa5eac8d1da5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>x_coordinate of 2D mesh edge</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd></dl></div><div class='xr-var-data'><pre>[508 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>SCHISM_hgrid_edge_y</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_edge)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ba5ee9f7-b24d-4ab2-9446-6a90666e9f49' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ba5ee9f7-b24d-4ab2-9446-6a90666e9f49' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-64fdea8b-aaba-4cde-9315-cebd8727c8f7' class='xr-var-data-in' type='checkbox'><label for='data-64fdea8b-aaba-4cde-9315-cebd8727c8f7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>y_coordinate of 2D mesh edge</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd></dl></div><div class='xr-var-data'><pre>[508 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>edge_bottom_index</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_edge)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ad5b9260-a797-476e-a350-aa9914ba20d7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ad5b9260-a797-476e-a350-aa9914ba20d7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2eb1f862-ca7e-489c-a8f4-2618b2d47c25' class='xr-var-data-in' type='checkbox'><label for='data-2eb1f862-ca7e-489c-a8f4-2618b2d47c25' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>bottom level index at each edge</dd><dt><span>units :</span></dt><dd>non-dimensional</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>location :</span></dt><dd>edge</dd><dt><span>start_index :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[508 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>depth</span></div><div class='xr-var-dims'>(nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-d7249b5a-b85e-4fb8-b30f-74554c2a68b1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d7249b5a-b85e-4fb8-b30f-74554c2a68b1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-055552a7-6360-48bb-9761-3b8514243bd6' class='xr-var-data-in' type='checkbox'><label for='data-055552a7-6360-48bb-9761-3b8514243bd6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Bathymetry</dd><dt><span>units :</span></dt><dd>meters</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>location :</span></dt><dd>node</dd></dl></div><div class='xr-var-data'><pre>[192 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dry_value_flag</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-9c863184-1d41-4322-ac87-0a915e2ab69f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9c863184-1d41-4322-ac87-0a915e2ab69f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-17d6a7f2-0ff4-4465-9f3d-157826330772' class='xr-var-data-in' type='checkbox'><label for='data-17d6a7f2-0ff4-4465-9f3d-157826330772' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>values :</span></dt><dd>0: use last-wet value; 1: use junk</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>coordinate_system_flag</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1066fea4-9460-4787-b954-4a2d35847087' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1066fea4-9460-4787-b954-4a2d35847087' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c6f7c1ba-b454-4490-b9b2-cd7bb1bd6857' class='xr-var-data-in' type='checkbox'><label for='data-c6f7c1ba-b454-4490-b9b2-cd7bb1bd6857' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>[1 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>minimum_depth</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-bd244dc4-5631-4484-9098-60cdbf1f30e4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-bd244dc4-5631-4484-9098-60cdbf1f30e4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-af801dea-07bf-47cb-aeee-2cff4a5eefdd' class='xr-var-data-in' type='checkbox'><label for='data-af801dea-07bf-47cb-aeee-2cff4a5eefdd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sigma_h_c</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-d4c18875-4fc6-4577-8ec1-53f5fa03c3f0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d4c18875-4fc6-4577-8ec1-53f5fa03c3f0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-38138337-5caa-47de-a5eb-e82e9be38c9d' class='xr-var-data-in' type='checkbox'><label for='data-38138337-5caa-47de-a5eb-e82e9be38c9d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ocean_s_coordinate h_c constant</dd><dt><span>units :</span></dt><dd>meters</dd><dt><span>positive :</span></dt><dd>down</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sigma_theta_b</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-b502a75d-b9de-4587-a589-6e269512541c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b502a75d-b9de-4587-a589-6e269512541c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bd7baf38-410f-4646-a4cb-407230b775c4' class='xr-var-data-in' type='checkbox'><label for='data-bd7baf38-410f-4646-a4cb-407230b775c4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ocean_s_coordinate theta_b constant</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sigma_theta_f</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1ba2bee3-e05f-4cdf-9eeb-e2b4f734fc78' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1ba2bee3-e05f-4cdf-9eeb-e2b4f734fc78' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6f72f81c-bd23-473b-993b-ecef532407fd' class='xr-var-data-in' type='checkbox'><label for='data-6f72f81c-bd23-473b-993b-ecef532407fd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ocean_s_coordinate theta_f constant</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sigma_maxdepth</span></div><div class='xr-var-dims'>(one)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-68ee14b4-46f7-4c80-a4f9-9663d6b37380' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-68ee14b4-46f7-4c80-a4f9-9663d6b37380' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2adf4e16-e6a6-42e1-8b35-3d759c285e23' class='xr-var-data-in' type='checkbox'><label for='data-2adf4e16-e6a6-42e1-8b35-3d759c285e23' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ocean_s_coordinate maximum depth cutoff (mixed s over z boundary)</dd><dt><span>units :</span></dt><dd>meters</dd><dt><span>positive :</span></dt><dd>down</dd></dl></div><div class='xr-var-data'><pre>[1 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>Cs</span></div><div class='xr-var-dims'>(sigma)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-2e389c37-3fcd-4919-a457-93ccf0e59738' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2e389c37-3fcd-4919-a457-93ccf0e59738' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a0c91a4c-8eeb-497f-bab6-0da7d7104b19' class='xr-var-data-in' type='checkbox'><label for='data-a0c91a4c-8eeb-497f-bab6-0da7d7104b19' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Function C(s) at whole levels</dd><dt><span>positive :</span></dt><dd>up</dd></dl></div><div class='xr-var-data'><pre>[2 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>wetdry_node</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-11cfd9d9-5aa2-43b3-87fd-cc872dad7bd0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-11cfd9d9-5aa2-43b3-87fd-cc872dad7bd0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-76798308-42cc-4562-9e5f-dd5c902c78ee' class='xr-var-data-in' type='checkbox'><label for='data-76798308-42cc-4562-9e5f-dd5c902c78ee' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>wetdry_elem</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_face)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-61197df6-38d9-4f43-9e41-7f985f0b1006' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-61197df6-38d9-4f43-9e41-7f985f0b1006' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d3668ff2-98bc-4929-99db-83aa41b44992' class='xr-var-data-in' type='checkbox'><label for='data-d3668ff2-98bc-4929-99db-83aa41b44992' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>elem</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>4</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[3804 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>wetdry_side</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_edge)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-bb20b8e2-23d0-4008-8bd9-66187edf2f2f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bb20b8e2-23d0-4008-8bd9-66187edf2f2f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d8d70edb-6740-4d72-9c55-14021d56b498' class='xr-var-data-in' type='checkbox'><label for='data-d8d70edb-6740-4d72-9c55-14021d56b498' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>side</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>7</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[6096 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>zcor</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node, nSCHISM_vgrid_layers)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-1a2b0974-078e-45b9-95cc-52c47c7ebb6c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1a2b0974-078e-45b9-95cc-52c47c7ebb6c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e2012ce0-cd90-4361-ae9f-d2119f15097e' class='xr-var-data-in' type='checkbox'><label for='data-e2012ce0-cd90-4361-ae9f-d2119f15097e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>2</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[4608 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>elev</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ca58189c-084c-4ddd-8124-13869683d20e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ca58189c-084c-4ddd-8124-13869683d20e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-66febaef-76bb-47a5-a2a7-92baf3b14639' class='xr-var-data-in' type='checkbox'><label for='data-66febaef-76bb-47a5-a2a7-92baf3b14639' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>dahv</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node, two)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f4088136-0e88-4277-ad77-f4fbb5ff39a7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f4088136-0e88-4277-ad77-f4fbb5ff39a7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f7cfb40f-c0bd-444f-8640-e3d739202912' class='xr-var-data-in' type='checkbox'><label for='data-f7cfb40f-c0bd-444f-8640-e3d739202912' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>2</dd></dl></div><div class='xr-var-data'><pre>[4608 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WWM_1</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-14195778-94e5-4056-829f-199e9d91ebf3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-14195778-94e5-4056-829f-199e9d91ebf3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-16abff2f-2d3f-4d59-bdc4-b689e7b80398' class='xr-var-data-in' type='checkbox'><label for='data-16abff2f-2d3f-4d59-bdc4-b689e7b80398' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WWM_2</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6a00e960-1112-460d-80d0-25f52023317e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6a00e960-1112-460d-80d0-25f52023317e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-39242b9d-3601-4394-8d49-cc5c535f3d94' class='xr-var-data-in' type='checkbox'><label for='data-39242b9d-3601-4394-8d49-cc5c535f3d94' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WWM_10</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-ef4b6089-f77c-4820-ad2c-edf0bb94b012' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ef4b6089-f77c-4820-ad2c-edf0bb94b012' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c969443b-0771-485b-87fb-dad69c2fc1c8' class='xr-var-data-in' type='checkbox'><label for='data-c969443b-0771-485b-87fb-dad69c2fc1c8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WWM_11</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-dd722caa-3371-4a93-a45c-15b0823d8b88' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dd722caa-3371-4a93-a45c-15b0823d8b88' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c7c25046-191c-4c1b-a518-c923b8a0d5b8' class='xr-var-data-in' type='checkbox'><label for='data-c7c25046-191c-4c1b-a518-c923b8a0d5b8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WWM_18</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-bb5fd37c-dd11-40c3-822a-b0ebf85738c1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bb5fd37c-dd11-40c3-822a-b0ebf85738c1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2dd4d28d-7a99-44da-bf6a-61c64bdf2865' class='xr-var-data-in' type='checkbox'><label for='data-2dd4d28d-7a99-44da-bf6a-61c64bdf2865' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WWM_19</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-10394c4d-9f1f-4f1f-b6f0-338316dfe319' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-10394c4d-9f1f-4f1f-b6f0-338316dfe319' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1491b008-5c8b-4c95-9c01-1d8cbdc09652' class='xr-var-data-in' type='checkbox'><label for='data-1491b008-5c8b-4c95-9c01-1d8cbdc09652' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>WWM_20</span></div><div class='xr-var-dims'>(time, nSCHISM_hgrid_node)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6af978da-b1a4-4eae-9c81-b6f7fcf47d2e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6af978da-b1a4-4eae-9c81-b6f7fcf47d2e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2e7bc303-d28c-4e8b-937d-00e60da2ae94' class='xr-var-data-in' type='checkbox'><label for='data-2e7bc303-d28c-4e8b-937d-00e60da2ae94' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>mesh :</span></dt><dd>SCHISM_hgrid</dd><dt><span>data_horizontal_center :</span></dt><dd>node</dd><dt><span>data_vertical_center :</span></dt><dd>full</dd><dt><span>i23d :</span></dt><dd>1</dd><dt><span>ivs :</span></dt><dd>1</dd></dl></div><div class='xr-var-data'><pre>[2304 values with dtype=float32]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-149dd618-0bcd-4552-af7f-405cff36f799' class='xr-section-summary-in' type='checkbox'  ><label for='section-149dd618-0bcd-4552-af7f-405cff36f799' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c0c464a9-9fc4-42ef-8cb2-ba0cbd9020d5' class='xr-index-data-in' type='checkbox'/><label for='index-c0c464a9-9fc4-42ef-8cb2-ba0cbd9020d5' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2023-01-01 01:00:00&#x27;, &#x27;2023-01-01 02:00:00&#x27;,
               &#x27;2023-01-01 03:00:00&#x27;, &#x27;2023-01-01 04:00:00&#x27;,
               &#x27;2023-01-01 05:00:00&#x27;, &#x27;2023-01-01 06:00:00&#x27;,
               &#x27;2023-01-01 07:00:00&#x27;, &#x27;2023-01-01 08:00:00&#x27;,
               &#x27;2023-01-01 09:00:00&#x27;, &#x27;2023-01-01 10:00:00&#x27;,
               &#x27;2023-01-01 11:00:00&#x27;, &#x27;2023-01-01 12:00:00&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>sigma</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-5ec62a81-b987-4966-8546-d5944ae1976e' class='xr-index-data-in' type='checkbox'/><label for='index-5ec62a81-b987-4966-8546-d5944ae1976e' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([-1.0, 0.0], dtype=&#x27;float32&#x27;, name=&#x27;sigma&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-dfc93fc3-10e1-4b68-9ae1-044a409f21e1' class='xr-section-summary-in' type='checkbox'  checked><label for='section-dfc93fc3-10e1-4b68-9ae1-044a409f21e1' class='xr-section-summary' >Attributes: <span>(9)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>Conventions :</span></dt><dd>CF-1.0, UGRID-1.0</dd><dt><span>title :</span></dt><dd>SCHISM Model output</dd><dt><span>institution :</span></dt><dd>SCHISM Model output</dd><dt><span>source :</span></dt><dd>SCHISM model output version v10</dd><dt><span>references :</span></dt><dd>http://ccrm.vims.edu/schismweb/</dd><dt><span>history :</span></dt><dd>created by combine_output11</dd><dt><span>comment :</span></dt><dd>SCHISM Model output</dd><dt><span>type :</span></dt><dd>SCHISM Model output</dd><dt><span>VisIT_plugin :</span></dt><dd>https://schism.water.ca.gov/library/-/document_library/view/3476283</dd></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="c1"># plot gridded fields - elevation</span>
<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>

    <span class="c1">#fig = plt.figure(facecolor=&#39;w&#39;, figsize=(5,4))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%b-%Y %H:00&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                   <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">+</span><span class="mf">0.0005</span><span class="p">,</span><span class="n">lats</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="mf">0.0002</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="n">cax</span><span class="o">=</span><span class="n">schism_plot</span><span class="p">(</span><span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span><span class="p">,</span><span class="s1">&#39;elev&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">145</span><span class="p">,</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="o">-</span><span class="mi">16</span><span class="p">],</span> <span class="n">project</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plotmesh</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
              <span class="n">vectors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">varscale</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span> <span class="n">axis</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span> <span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">labelsize</span> <span class="o">=</span> <span class="mi">24</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="c1">#figname = &#39;/path_to_your_dir/elev_%02d.png&#39;%ix</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_42_0.png" src="../_images/notebooks_schism_procedural_42_0.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_42_1.png" src="../_images/notebooks_schism_procedural_42_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_42_2.png" src="../_images/notebooks_schism_procedural_42_2.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plot gridded fields - Hs</span>
<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">schout</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>

    <span class="c1">#fig = plt.figure(facecolor=&#39;w&#39;, figsize=(5,4))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%b-%Y %H:00&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                   <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">lons</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">+</span><span class="mf">0.0005</span><span class="p">,</span><span class="n">lats</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="mf">0.0002</span><span class="p">),</span> <span class="n">xycoords</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="n">cax</span><span class="o">=</span><span class="n">schism_plot</span><span class="p">(</span><span class="n">schout</span><span class="p">,</span> <span class="n">meshtri</span><span class="p">,</span><span class="s1">&#39;WWM_1&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">145</span><span class="p">,</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="o">-</span><span class="mi">16</span><span class="p">],</span> <span class="n">project</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plotmesh</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
              <span class="n">vectors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">varscale</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="n">contours</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span> <span class="n">axis</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span> <span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">labelsize</span> <span class="o">=</span> <span class="mi">24</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
    <span class="c1">#figname = &#39;/path_to_your_dir/Hs_%02d.png&#39;%ix</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_43_0.png" src="../_images/notebooks_schism_procedural_43_0.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_43_1.png" src="../_images/notebooks_schism_procedural_43_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_schism_procedural_43_2.png" src="../_images/notebooks_schism_procedural_43_2.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The full model can be dumped to a configuration file.</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="c1"># dump full model to yaml</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;model.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(),</span> <span class="n">f</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>cat<span class="w"> </span>model.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
config:
  CGPP: F
  CPP: F
  DM: T
  DPEAK: T
  DSPR: T
  HS: T
  KPP: F
  LPP: F
  ORBITAL: F
  PEAKD: T
  PEAKDSPR: T
  TM01: T
  TM02: F
  TPP: T
  TPPD: T
  UBOT: F
  WNPP: F
  ac: T
  brcrYN: &#39;&#39;
  checkout: main
  currYN: &#39;!&#39;
  data:
    atmos:
      air_1:
        buffer: 2.0
        coords:
          t: time
          x: longitude
          y: latitude
          z: depth
        crop_data: true
        data_type: sflux_air
        fail_if_missing: true
        filter:
          crop:
            latitude:
              start: -26.4884499831
              stop: -14.343982374700001
            longitude:
              start: 143.572275673
              stop: 156.1662613999
            time:
              start: &amp;id001 2023-01-01 00:00:00
              stop: 2023-01-02 06:00:00
          derived: {}
          rename: {}
          sort:
            coords:
            - latitude
          subset: {}
          timenorm: {}
        id: air_1
        max_window_hours: 120.0
        model_type: data_grid
        prmsl_name: mslp
        relative_weight: 1.0
        source:
          catalog_uri: !!python/object/apply:pathlib.PosixPath
          - ..
          - ..
          - tests
          - schism
          - ..
          - data
          - catalog.yaml
          dataset_id: era5
          kwargs: {}
          model_type: intake
        spfh_name: spfh
        stmp_name: stmp
        time_buffer:
        - 0
        - 1
        uwind_name: u10
        variables: []
        vwind_name: v10
      air_2: null
      data_type: sflux
      prc_1: null
      prc_2: null
      rad_1: null
      rad_2: null
    data_type: schism
    ocean:
      SAL_3D: null
      TEM_3D: null
      data_type: ocean
      elev2D:
        buffer: 0.0
        coords:
          t: time
          x: xlon
          y: ylat
          z: depth
        crop_data: true
        data_type: boundary
        filter:
          crop:
            time:
              start: *id001
              stop: 2023-01-03 00:00:00
          derived: {}
          rename: {}
          sort: {}
          subset: {}
          timenorm: {}
        id: elev2D
        interpolate_missing_coastal: true
        model_type: data_grid
        sel_method: interp
        sel_method_kwargs: {}
        source:
          kwargs: {}
          model_type: open_dataset
          uri: !!python/object/apply:pathlib.PosixPath
          - ..
          - ..
          - tests
          - schism
          - test_data
          - hycom.nc
        spacing: null
        time_buffer:
        - 0
        - 1
        variable: surf_el
        variables:
        - surf_el
      uv3D: null
    tides:
      add_earth_tidal: true
      constituents:
      - M2
      - S2
      - N2
      cutoff_depth: 50.0
      data_type: tide
      database: tpxo
      ethconst: []
      flags:
      - - 5
        - 3
        - 0
        - 0
      relax: []
      sobc:
      - 1
      sthconst: []
      tidal_data:
        data_type: tidal_dataset
        elevations: !!python/object/apply:pathlib.PosixPath
        - ..
        - ..
        - tests
        - schism
        - test_data
        - tpxo9-test
        - h_m2s2n2.nc
        velocities: !!python/object/apply:pathlib.PosixPath
        - ..
        - ..
        - tests
        - schism
        - test_data
        - tpxo9-test
        - u_m2s2n2.nc
      tobc:
      - 1
      tthconst: []
      vthconst: []
    wave:
      buffer: 0.0
      coords:
        t: time
        x: lon
        y: lat
        z: depth
      crop_data: true
      data_type: wave
      filter:
        crop:
          time:
            start: *id001
            stop: 2023-01-02 06:00:00
        derived: {}
        rename: {}
        sort: {}
        subset: {}
        timenorm: {}
      grid_type: boundary_wave_station
      id: wavedata
      model_type: data_grid
      sel_method: nearest
      sel_method_kwargs:
        unique: true
      source:
        catalog_uri: !!python/object/apply:pathlib.PosixPath
        - ..
        - ..
        - tests
        - schism
        - ..
        - data
        - catalog.yaml
        dataset_id: ausspec
        kwargs: {}
        model_type: intake
      spacing: null
      time_buffer:
      - 0
      - 1
      variables: []
  definetc: -1
  deltc: 360
  deltc_out: 3600
  dzb_decayYN: &#39;!&#39;
  extrap: T
  extrapYN: &#39;!&#39;
  filewind: wind.dat
  fricc: 0.067
  grid:
    albedo:
      crs: epsg:4326
      gr3_type: albedo
      hgrid:
        id: hgrid
        model_type: data_blob
        source: &amp;id002 !!python/object/apply:pathlib.PosixPath
        - ..
        - ..
        - tests
        - schism
        - test_data
        - hgrid_20kmto60km_rompyschism_testing.gr3
      value: 0.15
    crs: epsg:4326
    diffmax:
      crs: epsg:4326
      gr3_type: diffmax
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
      value: 1.0
    diffmin:
      crs: epsg:4326
      gr3_type: diffmin
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
      value: 1.0e-06
    drag: null
    grid_type: schism
    hgrid:
      id: hgrid
      model_type: data_blob
      source: *id002
    hgrid_WWM:
      gridtype: hgrid_WWM
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
    hgridll:
      gridtype: hgridll
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
    manning:
      crs: epsg:4326
      gr3_type: manning
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
      value: 1.0
    rough: null
    vgrid: {}
    watertype:
      crs: epsg:4326
      gr3_type: watertype
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
      value: 1.0
    windrot_geo2proj:
      crs: epsg:4326
      gr3_type: windrot_geo2proj
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
      value: 0.0
    wwmbnd:
      bcflags: null
      hgrid:
        id: hgrid
        model_type: data_blob
        source: *id002
    x: !!python/object/apply:numpy.core.multiarray._reconstruct
      args:
      - &amp;id003 !!python/name:numpy.ndarray &#39;&#39;
      - !!python/tuple
        - 0
      - !!binary |
        Yg==
      state: !!python/tuple
      - 1
      - !!python/tuple
        - 192
      - &amp;id004 !!python/object/apply:numpy.dtype
        args:
        - f8
        - false
        - true
        state: !!python/tuple
        - 3
        - &lt;
        - null
        - null
        - null
        - -1
        - -1
        - 0
      - false
      - !!binary |
        0P1O8yMGY0CH9g7Pw/5iQGI0e/0B9mJAUKkxKX7sYkAZ/qv8HgdjQOpWxvy4EGNAedEbUgsBY0Ce
        8LCWbONiQOtJqyVm+GJAST+k0jXvYkA87/lzF9piQIPnG97uDGNAc5k+JicbY0Ariu5QCdhiQKeA
        qR8KBWNAKpRRmR3nYkCjde12mfpiQNdkDPo68WJAFajHKnzgYkB6LDGjhBRjQFqGGRJfJ2NA1cak
        PETZYkBpQ/dNvghjQGloxpVA7GJA9TiUafn4YkAuzwjQJeRiQPfc3Zl1AWNAvTEST94dY0DcesH3
        wzVjQAl1ZnlFPmNA5rXdfoxDY0AEWr87T7FiQIoTWDN0vGJAQ3sq5LjIYkD4qsGuANliQGXg9DVx
        0GJArZZ2lb4QY0A+yeOKj/NiQFBmXKlR5mJAymZvKUYBY0DqFPNJEShjQOfxLOewGWNAmTV/9Fc1
        Y0CN4vuvCjpjQAxlbQNSRWNABE/Hwuy4YkC1qxBO5K5iQJyHfKBYw2JAWLTkqYLMYkDJpnAObNhi
        QJLuZku/FmNAYuzdT0jmYkBCUceEGwpjQE6PLZB/9mJAF85I1MkmY0AeyJQsyzJjQAyEP6h0RGNA
        HelYGoq+YkDjJq4YArdiQN3eCrH+rWJA5LjOJX7GYkDjzYAMo89iQPU8vtDC2GJAiUbQf9PlYkAJ
        azmRbRljQNIejKe4DWNAamqqRt7xYkCDgz94EwBjQEVZdsMxImNAJT/t7nw2Y0CNOf0QA6hiQCjX
        ++HsvmJA9Wrd1cW2YkCBCQz0MbFiQHeM4aADq2JA+Jihj//JYkCoz/35h9JiQJk1xsmL7mJAOKj0
        QKHcYkApGuCM3uZiQOr9bEuwEWNAIag0yEcGY0DiEB0G+/liQDt+a4iSFGNA3ZhfA5ofY0Be2Sol
        kapiQFubRAipoGJAYTCSjb28YkBMFO/xorJiQFyv0YDmyGJAxODOv13UYkB6S2eXL/BiQMKHgO5s
        32JAHrPNPJroYkADs7F37wVjQFNnzcr4+GJAGdQkIHENY0BoPTgzjK9iQJC3iOv5pmJAhPqDMYSg
        YkALFBkjV5diQGeqtzDBvGJAvAUy/QLLYkDej2LXstdiQENlDSgl8GJAa0gv9WLkYkC8nb+4nPxi
        QKNud/jCtGJA7r9/B5enYkAyoi3ZA5xiQH4e0SuvwWJASBCgeqrOYkB+iv7wVdxiQAX4XqMc7mJA
        iuxMp5m5YkBP1z6UZK1iQJx1VX7rn2JAD+i+eDSVYkAaqZi+T8ViQICVwy/00WJA3siiizLfYkCJ
        ctbhUL1iQO3h1pIis2JAOJkIwVmnYkBvuGWBG51iQODRPETHlGJAAuE7GKbGYkD/oH9QkNViQJX/
        N1jiuWJA35dmOkStYkDs7vskSKFiQO1ZAjIFiWJAwOcsWCd+YkCMymXeNJRiQBjLfBjdw2JADWWD
        MROzYkBJztBb36ZiQCsX3CbjmmJAQocb3XFcYkCK4h6aFGRiQI8Idlb0Z2JAAXfYQTdzYkAoSC3K
        fHpiQOuujhHohWJAlvC8v3aQYkDurKTwfK1iQMQlfn48n2JA5ey6S0OVYkDKs2Aca1NiQC72yRfl
        XGJA3l8sMAVlYkCaXRKHFm5iQFFAQiz1emJAaDUlXA6IYkCNPWq5q5diQHa49CzDVWJAe/KpTbdK
        YkBrgf+dpF5iQBVD4xlla2JA0IDBCP53YkDOTfLfZ39iQF3SwvXJimJALYrzwCNTYkAE+nVFB0pi
        QEduIPC2WWJAYVsaEpNmYkCuaTkrDXRiQD+u2NkjfmJA4cOAN/lPYkBmUxVm90ViQDiUoXMdU2JA
        mtaShNdeYkA+es4UzXBiQMwDJBd9SWJAkv/WCXBMYkA0fTvwPkBiQLNRmug7VGJARfkrqJxgYkDY
        TkU+KEpiQMbgjX8xQ2JA8ykhiz1QYkBxkzwTJVViQGILBPTIRmJAMI17hA1CYkDFL3BNlk5iQMzQ
        emyCRmJApUa3Cfc+YkD9d0YYjEViQB6vq/1RPGJAHelaZHw4YkBYsSv2vjZiQJt6EhVQMmJA
    y: !!python/object/apply:numpy.core.multiarray._reconstruct
      args:
      - *id003
      - !!python/tuple
        - 0
      - !!binary |
        Yg==
      state: !!python/tuple
      - 1
      - !!python/tuple
        - 192
      - *id004
      - false
      - !!binary |
        cSXfDgt9OMBX13NiZ084wNpMzJaPIDjARZSzDof8N8CdBMKQTTU4wL524tJuRDjA0Al9BlYDOMDR
        Tuc5y7M3wIoZNe3PzTfAEqxSBH2YN8DX5m7zoGo3wDlYl00b9jfAYhbpZDoDOMAQZTlbER03wJ2Z
        lXOGqjfA8QAt3kpaN8BdD5hjD283wGRDkY8RSzfAB/iItUwVN8AC8NiacJk3wO14XxI4qDfAaccG
        vJfeNsCji4XV4y43wBvacHceBjfAhwbRdiYPN8DWUAwHwLg2wOWfmPqSyTbA1oe/L/gcN8AHffEV
        eRY3wLErF/UDmzbAj0+dTv8oNsC0M7ucgTQ2wMTstiJpfjbAGeJyItxmNsCdbqKcxGs2wOv9I+N6
        VTbA/u2A3JaeNsC2tIywvqE2wD6vjTx9TDbAGhGWPh5xNsBhqL92Ioc2wIp0izVmMjbA2EWi720y
        NsAkycd8rdE1wDKfipzAzTXALp3zMMQYNsBwn94Oiew1wKlX3ztQNzbAz0jNZYYgNsCgJcLhaRI2
        wOsGjYbz4TXALXc+cXTbNcCM2wJnBBU2wAGc8vJBFjbA/DF/XtfeNcANTOtJeXU1wOtUg7UUbDXA
        w1KqKpfvNcAQJ6xk8s01wJBdQnYApDXAnogYi7PjNcC7B0F3JNk1wLFnneKJnTXADnnnc151NcCp
        LytSMZo1wHZNFw0RqTXA+gOJ2CWcNcA34shJAa81wMzPUthaRjXAVYwwUtrnNMAmArjFc2k1wGUc
        ROcMrDXAmgYbmImONcCgHFgZjFs1wLsuzF7HKDXA7vtPOUiJNcDYKFVlkkw1wOhJJBC5TDXA+rpo
        3QE8NcCFMWVJACI1wFbt3vZyUjXAV4htYGljNcDF3ZognEU1wMZvZgmtADXA2LeRPibCNMAusrHT
        DvU0wB4M8dZdADXAvMm3y/pONcCse2MFURE1wCoXP1GGHjXANG+uQEH9NMCJer44SgY1wK0VlHr7
        6DTA6QZlvmXeNMD4b1oIpAA1wNVLg8+M5DTAxN3rsHqnNMAJkP+LKcY0wNIo61uQyDTAmiJLJQav
        NMBII0/sgrY0wCBjgwge2TTA24hosoa7NMAxAi8emqM0wCpABn0xrjTAF1+qVViYNMBLdZD+r3s0
        wF5LZLicfDTA6uRIAxGANMAv5Pkabms0wFlxdp8mcjTApogsSx1aNMCStHF9BUE0wCavALWANzTA
        uof3aYsqNMD9InxCSi80wIJNyloLKzTAWPVUr+Q+NMAX+i5NmxY0wLVYBYdi8zPAg60rya7EM8D4
        us/kcOUzwP3ermfk5DPAyE3jj0jkM8A1dDQJxeAzwC7hdaJJDjTAlPRTDK63M8DknhSIw4UzwGK/
        yolNnTPAozlkGjycM8DZYzQ/Np0zwBuLNBWM5DPAZFzK4PzqM8BPF8Ie1agzwMvx/WIsOzPAmYKJ
        hBVWM8AED2QhYE8zwBsvLmyFVTPAF2DRxCpOM8B/ii9PMS4zwDMv7pvHbjPAZRhs7M9yM8B3+7yC
        pa4zwE/Fo9KchzPAmhEUNnlPM8Cr0D7iEOoywP38xO/QDDPAPLrWRSYPM8B1WsLYxSczwJCykIQu
        DDPAkP8Arlb6MsCqunUlYyMzwJSAtNk6RjPAWfyCM/r3MsAYXtectKEywGGrwCQn6zLAN3OmkkP0
        MsCUJRVyTr8ywDZ2A2h/xjLAf7nALIfgMsAlJrp7OJwywAH5rtoXdDLAq6Sbqh6wMsAK2ssKyq0y
        wLrwdzfsZzLApOdXaKBqMsDzP7Z6gH4ywBuFC826QTLA7Re73xJsMsBE2t+F6HgywMXkD3r9HDLA
        ynDRTB0MMsASwRxjBQcywDftXHNrJzLAd3vPU2TkMcDgBAlH1TAywLeLu8nAwTHAZkTH4PGPMcBH
        kh3tkZoxwOSeoOgQ1THAYw8/0ClSMcC4bCrTM8wwwCELNShxTzHAe7JpBF6CMcAwiXgJ3IkwwOaY
        X5aF5DDA0cJOwl85McCH9V1J5mUwwMEJeQNbpDDAkzq8wULoMMCnvJk6D1gwwEt4/P7YqjDA
  h1_bcc: 50.0
  h2_bcc: 100.0
  h_bcc1: 100.0
  ibreak: 1
  ibtrack_openbndYN: &#39;!&#39;
  ic_elev: 0
  icou_elfe_wwm: 1
  ihfskip: 720
  inv_atm_bnd: 1
  iout_sta: 0
  iouts: 15
  iwbl: 0
  iwind_form: 1
  iwindoffYN: &#39;!&#39;
  limfak: 0.1
  lindsprdeg: F
  lsourceswam: F
  lsp2d: T
  mdc2: 36
  melim: 1
  mesbf: 1
  mesin: 1
  model_type: schismcsiro
  msc2: 36
  nchi: -1
  nouts: &#39;&#39;&#39;AWAC_in&#39;&#39;,&#39;&#39;AWAC_mid&#39;&#39;,&#39;&#39;AWAC_off&#39;&#39;,&#39;&#39;SPOT_1002&#39;&#39;,&#39;&#39;SPOT_1011&#39;&#39;,&#39;&#39;SPOT_1018&#39;&#39;,&#39;&#39;SPOT_1026&#39;&#39;&#39;
  nstep_wwm: 3
  outstyle: NC
  project: WAXA
  rlatitude: -29
  sav_cdYN: &#39;!&#39;
  sfea0: -29.0
  slam0: 120.0
  template: /source/rompy/rompy/templates/schism
  thetai: 0.8
  time_step: 120.0
  utc_start: 0
  walvYN: &#39;!&#39;
  wbdm: 90
  windYN: &#39;!&#39;
  wwm1: 1
  wwm10: 0
  wwm11: 0
  wwm12: 0
  wwm13: 0
  wwm14: 0
  wwm15: 0
  wwm16: 1
  wwm17: 1
  wwm18: 1
  wwm19: 0
  wwm2: 1
  wwm20: 0
  wwm21: 0
  wwm22: 0
  wwm23: 0
  wwm24: 0
  wwm25: 0
  wwm26: 0
  wwm27: 0
  wwm28: 0
  wwm29: 0
  wwm3: 0
  wwm30: 0
  wwm31: 0
  wwm31YN: &#39;!&#39;
  wwm32: 0
  wwm32YN: &#39;!&#39;
  wwm33: 0
  wwm33YN: &#39;!&#39;
  wwm34: 0
  wwm34YN: &#39;!&#39;
  wwm35: 0
  wwm35YN: &#39;!&#39;
  wwm36: 0
  wwm36YN: &#39;!&#39;
  wwm37: 0
  wwm37YN: &#39;!&#39;
  wwm4: 0
  wwm5: 0
  wwm6: 0
  wwm7: 0
  wwm8: 1
  wwm9: 1
  xouts: 115.6208687,115.5941886,115.58077,115.5942931,115.5830497,115.5807825,115.5960683
  youts: -32.611605,-32.611605,-32.613682,-32.6253914,-32.6135870,-32.6294226,-32.6096741
output_dir: !!python/object/apply:pathlib.PosixPath
- schism_procedural
period:
  duration: !!python/object/apply:datetime.timedelta
  - 1
  - 0
  - 0
  end: 2023-01-02 00:00:00
  include_end: true
  interval: !!python/object/apply:datetime.timedelta
  - 0
  - 3600
  - 0
  start: *id001
run_id: test_schism
</pre></div></div>
</div>
</section>
<section id="Running-from-configuration-files.">
<h2>Running from configuration files.<a class="headerlink" href="#Running-from-configuration-files." title="Link to this heading">#</a></h2>
<p>The full model dump above looks complex due to the fact that the full model state, including all default value, is written to the model.yaml file. The same model configuration can be achived in a much simpler file by simply specifying non default values. For example, the entire configuration above is specified in the demo.yaml file shown below</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>cat<span class="w"> </span>demo.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
output_dir: schism_declaritive
period:
  start: 20230101T00
  end: 20230101T12
  interval: 3600
run_id: test_schism
config:
  model_type: schismcsiro
  mesbf: 1
  fricc: 0.067
  grid:
    grid_type: schism
    hgrid:
      id: hgrid
      model_type: data_blob
        #source: ../../tests/schism/test_data/hgrid.gr3
      source: ../../tests/schism/test_data/hgrid_20kmto60km_rompyschism_testing.gr3
    manning: 1
  data:
    data_type: schism
    atmos:
      air_1:
        source:
          uri:  ../../tests/schism/test_data/atmos.nc
          model_type: open_dataset
        uwind_name: u10
        vwind_name: v10
        prml_name: mslp
        filter:
          sort: {coords: [latitude]}
        buffer: 5
    ocean:
      elev2D:
        buffer: 0.0
        coords:
          t: time
          x: xlon
          y: ylat
          z: depth
        source:
          uri:  ../../tests/schism/test_data/hycom.nc
          model_type: open_dataset
        variable: surf_el
    tides:
      constituents:
      - M2
      - S2
      - N2
      cutoff_depth: 50.0
      flags:
        - [5, 3, 0, 0]
      tidal_data:
        data_type: tidal_dataset
        elevations: ../../tests/schism/test_data/tpxo9-neaus/h_m2s2n2.nc
        velocities: ../../tests/schism/test_data/tpxo9-neaus/u_m2s2n2.nc
    wave:
      buffer: 0.0
      coords:
        t: time
        x: lon
        y: lat
        z: depth
      id: wavedata
      source:
        catalog_uri: ../../tests/data/catalog.yaml
        dataset_id: ausspec
        model_type: intake
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This can be loaded and used to instatiate the model object and run as above, e.g</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="n">demo_config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;demo.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">),</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">ModelRun</span><span class="p">(</span><span class="o">**</span><span class="n">demo_config</span><span class="p">)</span>
<span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
WARNING:rompy.schism.grid:manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
INFO:rompy.model:
INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Model settings:
INFO:rompy.model:
run_id: test_schism
period:
        Start: 2023-01-01 00:00:00
        End: 2023-01-01 12:00:00
        Duration: 12:00:00
        Interval: None
        Include End: True

output_dir: schism_declaritive
config: &lt;class &#39;rompy.schism.config.SchismCSIROConfig&#39;&gt;

INFO:rompy.model:-----------------------------------------------------
INFO:rompy.model:Generating model input files in schism_declaritive
INFO:rompy.schism.grid:Generated albedo with constant value of 0.15
INFO:rompy.schism.grid:Generated diffmin with constant value of 1e-06
INFO:rompy.schism.grid:Generated diffmax with constant value of 1.0
INFO:rompy.schism.grid:Generated watertype with constant value of 1.0
INFO:rompy.schism.grid:Generated windrot_geo2proj with constant value of 0.0
INFO:rompy.schism.grid:Generated manning with constant value of 1.0
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_declaritive/test_schism/hgrid.ll
INFO:rompy.schism.grid:Linking hgrid.gr3 to schism_declaritive/test_schism/hgrid_WWM.gr3
INFO:rompy.schism.data:Fetching air_1
INFO:rompy.schism.data:Fetching elev2D
INFO:rompy.schism.data:Fetching wavedata
INFO:rompy.schism.data:Generating tides
INFO:pyschism.forcing.bctides.bctides:Processing boundary 1:
INFO:pyschism.forcing.bctides.bctides:Elevation type: 5
WARNING:pyschism.forcing.bctides.bctides:Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for elevation constituent N2.
INFO:pyschism.forcing.bctides.bctides:Velocity type: 3
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent M2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent S2.
INFO:pyschism.forcing.bctides.tpxo:Querying TPXO for velocity constituent N2.
INFO:pyschism.forcing.bctides.bctides:Temperature type: 0
WARNING:pyschism.forcing.bctides.bctides:Temperature is not sepcified, not input needed!
INFO:pyschism.forcing.bctides.bctides:Salinity type: 0
INFO:pyschism.forcing.bctides.bctides:Salinity is not sepcified, not input needed!
INFO:rompy.model:
INFO:rompy.model:Successfully generated project in schism_declaritive
INFO:rompy.model:-----------------------------------------------------
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/source/rompy/notebooks/schism/schism_declaritive/test_schism&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Alternatively, this same config can be run directly using the rompy cli</span>
<span class="o">!</span>rm<span class="w"> </span>-fr<span class="w"> </span>schism_declaritive<span class="w"> </span>#remove<span class="w"> </span>previous<span class="w"> </span>run
<span class="o">!</span>rompy<span class="w"> </span>schism<span class="w"> </span>demo.yaml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
manning is being set to a constant value, this is not recommended. For best results, please supply friction gr3 files with spatially varying values. Further options are under development.
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/.venv/lib/python3.11/site-packages/pydantic/main.py:308: UserWarning: Pydantic serializer warnings:
  Expected `Union[BaseConfig, SwanConfig, definition-ref, definition-ref, SchismCSIROConfig]` but got `SchismCSIROConfig` - serialized value may not be as expected
  Expected `SfluxSource` but got `str` - serialized value may not be as expected
  Expected `dict[any, any]` but got `str` - serialized value may not be as expected
  Expected `str` but got `int` - serialized value may not be as expected
  return self.__pydantic_serializer__.to_python(
/source/rompy/.venv/lib/python3.11/site-packages/pydantic/main.py:308: UserWarning: Pydantic serializer warnings:
  Expected `SfluxSource` but got `str` - serialized value may not be as expected
  Expected `dict[any, any]` but got `str` - serialized value may not be as expected
  Expected `str` but got `int` - serialized value may not be as expected
  return self.__pydantic_serializer__.to_python(
/source/rompy/.venv/lib/python3.11/site-packages/pydantic/main.py:308: UserWarning: Pydantic serializer warnings:
  Expected `SfluxSource` but got `str` - serialized value may not be as expected
  return self.__pydantic_serializer__.to_python(
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/.venv/lib/python3.11/site-packages/xarray/core/dataset.py:275: UserWarning: The specified chunks separate the stored chunks along dimension &#34;time&#34; starting at index 1. This could degrade performance. Instead, consider rechunking after loading.
  warnings.warn(
/source/rompy/.venv/lib/python3.11/site-packages/intake_xarray/base.py:21: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
/source/rompy/rompy/core/filters.py:127: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if k in ds.dims.keys()
/source/rompy/rompy/core/filters.py:131: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  if (k not in ds.dims.keys()) and (k in ds.coords.keys()):
/source/rompy/.venv/lib/python3.11/site-packages/wavespectra/output/ww3.py:108: UserWarning: Times can&#39;t be serialized faithfully to int64 with requested units &#39;days since 1990-01-01&#39;. Resolution of &#39;hours&#39; needed. Serializing times to floating point instead. Set encoding[&#39;dtype&#39;] to integer dtype to serialize to int64. Set encoding[&#39;dtype&#39;] to floating point dtype to silence this warning.
  other.to_netcdf(filename)
Combination of 3 and 4, time history of elevation is read in from elev2D.th.nc!
Temperature is not sepcified, not input needed!
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="physics.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">SWAN Physics Components</p>
      </div>
    </a>
    <a class="right-next"
       href="../api.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API  Documentation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">SCHISM procedural example</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Frontmatter">Frontmatter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Workspace-basepath">Workspace basepath</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Model-Grid">Model Grid</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Forcing-data">Forcing data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Sflux-Data">Sflux Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Ocean-Boundary">Ocean Boundary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Wave">Wave</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Tidal-data">Tidal data</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Full-config-object">Full config object</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#Model-Run">Model Run</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Generate-workspace">Generate workspace</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Run-schism">Run schism</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Check-results">Check results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Running-from-configuration-files.">Running from configuration files.</a></li>
</ul>
</li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/notebooks/schism_procedural.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2021, CSIRO and rompy contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.5.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>